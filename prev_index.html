<!doctype html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>┘╛┘å┘ä ┘à╪»█î╪▒█î╪¬</title>
    <meta name="color-scheme" content="light" />
    <link rel="icon" href="data:," />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Login View -->
    <main id="login-view" class="view hidden">
      <section class="auth-card">
        <div class="brand">
          <div class="logo">GN</div>
          <h1>┘╛┘å┘ä ┘à╪»█î╪▒█î╪¬</h1>
          <p class="muted">┘ê╪▒┘ê╪» ╪¿╪▒╪º█î ╪º╪»╪º┘à┘ç ┘à╪»█î╪▒█î╪¬</p>
        </div>
        <form id="login-form" class="form">
          <label class="field">
            <span>┘å╪º┘à ┌⌐╪º╪▒╪¿╪▒█î</span>
            <input id="username" type="text" inputmode="text" autocomplete="username" placeholder="┘à╪½╪º┘ä: admin" required />
          </label>
          <label class="field">
            <span>╪▒┘à╪▓ ╪╣╪¿┘ê╪▒</span>
            <input id="password" type="password" autocomplete="current-password" placeholder="ΓÇóΓÇóΓÇóΓÇó" required />
          </label>
          <button type="submit" class="btn primary">┘ê╪▒┘ê╪»</button>
          <p class="hint">┘å╪º┘à ┌⌐╪º╪▒╪¿╪▒█î: <b>admin</b> ΓÇö ╪▒┘à╪▓: <b>1234</b></p>
          <p id="login-error" class="error" role="alert" aria-live="polite"></p>
        </form>
      </section>
    </main>

    <!-- App View -->
    <div id="app-view" class="view hidden">
      <aside class="sidebar">
        <div class="sidebar-header">
          <div class="logo small">GN</div>
          <div class="title">┘à╪»█î╪▒█î╪¬</div>
        </div>
        <nav class="nav">
          <button class="nav-item active" data-tab="home" aria-current="page">
            <span>╪«╪º┘å┘ç</span>
          </button>
          <button class="nav-item" data-tab="users">
            <span>┌⌐╪º╪▒╪¿╪▒╪º┘å</span>
          </button>
          <button class="nav-item" data-tab="branches">
            <span>┘à╪»█î╪▒█î╪¬ ╪┤╪╣╪¿</span>
          </button>
          <button class="nav-item" data-tab="settings">
            <span>╪¬┘å╪╕█î┘à╪º╪¬</span>
          </button>
        </nav>
        <div class="sidebar-footer">
          <button id="logout" class="btn ghost">╪«╪▒┘ê╪¼</button>
        </div>
      </aside>

      <main class="content">
        <header class="topbar">
          <button id="sidebarToggle" class="icon-btn" title="┌⌐┘ê┌å┌⌐/╪¿╪▓╪▒┌» ┌⌐╪▒╪»┘å ╪│╪º█î╪»╪¿╪º╪▒" aria-label="┌⌐┘ê┌å┌⌐/╪¿╪▓╪▒┌» ┌⌐╪▒╪»┘å ╪│╪º█î╪»╪¿╪º╪▒">Γëí</button>
          <h2 id="page-title">╪«╪º┘å┘ç</h2>
          <div class="spacer"></div>
          <div id="live-clock" class="clock" aria-live="polite"></div>
        </header>

        <section id="tab-home" class="tab active">
          <div class="cards">
            <div class="card kpi">
              <div class="kpi-label">╪¬╪╣╪»╪º╪» ┌⌐╪º╪▒╪¿╪▒╪º┘å</div>
              <div class="kpi-value" id="kpi-users">0</div>
            </div>
            <div class="card kpi">
              <div class="kpi-label">┌⌐╪º╪▒╪¿╪▒╪º┘å ┘ü╪╣╪º┘ä</div>
              <div class="kpi-value" id="kpi-active">0</div>
            </div>
            <div class="card kpi">
              <div class="kpi-label">╪¬┘å╪╕█î┘à╪º╪¬</div>
              <div class="kpi-value">3</div>
            </div>
          </div>
          <div class="card">
            <h3>╪«┘ê╪┤ ╪ó┘à╪»█î╪»</h3>
            <p class="muted">╪º█î┘å █î┌⌐ ┘å┘à┘ê┘å┘ç ╪│╪º╪»┘ç ╪º╪▓ ┘╛┘å┘ä ┘à╪»█î╪▒█î╪¬ ╪▒╪º╪│╪¬ΓÇî┌å█î┘å ╪¿╪º ╪╖╪▒╪º╪¡█î ┘à╪»╪▒┘å ╪º╪│╪¬.</p>
          </div>
        </section>

        <section id="tab-users" class="tab">
          <div class="card">
            <div class="table-header">
              <h3>┌⌐╪º╪▒╪¿╪▒╪º┘å</h3>
              <button class="btn primary" id="add-user">╪º┘ü╪▓┘ê╪»┘å ┌⌐╪º╪▒╪¿╪▒</button>
            </div>
            <div class="table-wrapper">
              <table>
                <thead>
                  <tr>
                    <th>┘å╪º┘à</th>
                    <th>╪¬┘ä┘ü┘å</th>
                    <th>┘ê╪╢╪╣█î╪¬</th>
                  </tr>
                </thead>
                <tbody id="users-body"></tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- Branch Management Tab -->
        <section id="tab-branches" class="tab">
          <div class="sub-layout">
            <aside class="sub-sidebar">
              <div class="sub-header">┘à╪»█î╪▒█î╪¬ ╪┤╪╣╪¿</div>
              <nav id="branch-subnav" class="sub-nav">
                <button class="sub-item active" data-view="manage">╪╣┘à┘ê┘à█î</button>
                <div id="branch-items"></div>
              </nav>
            </aside>
            <div class="sub-content">
              <!-- Manage view: add/list branches -->
              <div id="branch-manage-view" class="card">
                <div class="table-header">
                  <h3>┘à╪»█î╪▒█î╪¬ ╪┤╪╣╪¿</h3>
                </div>
                <form id="add-branch-form" class="form grid">
                  <label class="field">
                    <span>┘å╪º┘à ╪┤╪╣╪¿┘ç</span>
                    <input type="text" id="branch-name" placeholder="┘à╪½┘ä╪º┘ï: ╪┤╪╣╪¿┘ç ┘à╪▒┌⌐╪▓█î" required />
                  </label>
                  <div class="field">
                    <span>&nbsp;</span>
                    <button type="submit" class="btn primary">╪º┘ü╪▓┘ê╪»┘å ╪┤╪╣╪¿┘ç</button>
                  </div>
                </form>
                <div class="table-wrapper" style="margin-top:12px;">
                  <table>
                    <thead>
                      <tr>
                        <th>┘å╪º┘à ╪┤╪╣╪¿┘ç</th>
                        <th>╪º┘é╪»╪º┘à╪º╪¬</th>
                      </tr>
                    </thead>
                    <tbody id="branches-body"></tbody>
                  </table>
                </div>
              </div>

              <!-- Branch page: default prices + systems list -->
              <div id="branch-page-view" class="hidden">
                <!-- Default prices of branch -->
                <div class="card" style="margin-bottom:12px;">
                  <h3>┘é█î┘à╪¬ΓÇî┘ç╪º█î ┘╛█î╪┤┘ü╪▒╪╢ ╪┤╪╣╪¿┘ç</h3>
                  <div class="table-header">
                    <div></div>
                    <div class="period-toolbar">
                      <label class="field" style="margin:0;">
                        <span></span>
                        <select id="period-select"></select>
                      </label>
                      <button id="manage-periods" type="button" class="btn">╪¬┘å╪╕█î┘à ╪¿╪º╪▓┘çΓÇî┘ç╪º█î ╪▓┘à╪º┘å█î</button>
                    </div>
                  </div>
                  <form id="default-prices-form" class="form grid">
                    <label class="field">
                      <span>╪¬┌⌐ ╪»╪│╪¬┘ç (╪▒█î╪º┘ä/╪│╪º╪╣╪¬)</span>
                      <input class="price-input" id="def-1p" type="text" inputmode="numeric" required />
                    </label>
                    <label class="field">
                      <span>╪»┘ê ╪»╪│╪¬┘ç (╪▒█î╪º┘ä/╪│╪º╪╣╪¬)</span>
                      <input class="price-input" id="def-2p" type="text" inputmode="numeric" required />
                    </label>
                    <label class="field">
                      <span>╪│┘ç ╪»╪│╪¬┘ç (╪▒█î╪º┘ä/╪│╪º╪╣╪¬)</span>
                      <input class="price-input" id="def-3p" type="text" inputmode="numeric" required />
                    </label>
                    <label class="field">
                      <span>┌å┘ç╪º╪▒ ╪»╪│╪¬┘ç (╪▒█î╪º┘ä/╪│╪º╪╣╪¬)</span>
                      <input class="price-input" id="def-4p" type="text" inputmode="numeric" required />
                    </label>
                    <label class="field">
                      <span>╪¬┘ê┘ä╪» (╪▒█î╪º┘ä)</span>
                      <input class="price-input" id="def-birthday" type="text" inputmode="numeric" required />
                    </label>
                    <label class="field">
                      <span>┘ü█î┘ä┘à (╪▒█î╪º┘ä)</span>
                      <input class="price-input" id="def-film" type="text" inputmode="numeric" required />
                    </label>
                    <div class="field full">
                      <button type="submit" class="btn primary">╪░╪«█î╪▒┘ç ┘é█î┘à╪¬ΓÇî┘ç╪º█î ┘╛█î╪┤┘ü╪▒╪╢</button>
                    </div>
                    <p id="default-prices-msg" class="hint full"></p>
                  </form>
                </div>

                <div class="card">
                  <div class="table-header">
                    <h3 id="branch-page-title">╪┤╪╣╪¿┘ç</h3>
                    <form id="add-system-form" class="form" style="grid-auto-flow: column; align-items:center; grid-auto-columns: max-content; gap:8px;">
                      <input id="system-name-input" type="text" placeholder="┘å╪º┘à ╪│█î╪│╪¬┘à" required />
                      <button type="submit" class="btn primary">╪º┘ü╪▓┘ê╪»┘å ╪│█î╪│╪¬┘à</button>
                    </form>
                  </div>

                  <div id="bulk-bar" class="bulk-bar">
                    <div class="bulk-left">
                      <label class="chk"><input type="checkbox" id="select-all" /> ╪º┘å╪¬╪«╪º╪¿ ┘ç┘à┘ç</label>
                    </div>
                    <form id="bulk-form" class="form bulk-form">
                      <input class="price-input" id="bulk-1p" type="text" inputmode="numeric" placeholder="╪¬┌⌐ ╪»╪│╪¬┘ç" required />
                      <input class="price-input" id="bulk-2p" type="text" inputmode="numeric" placeholder="╪»┘ê ╪»╪│╪¬┘ç" required />
                      <input class="price-input" id="bulk-3p" type="text" inputmode="numeric" placeholder="╪│┘ç ╪»╪│╪¬┘ç" required />
                      <input class="price-input" id="bulk-4p" type="text" inputmode="numeric" placeholder="┌å┘ç╪º╪▒ ╪»╪│╪¬┘ç" required />
                      <input class="price-input" id="bulk-birthday" type="text" inputmode="numeric" placeholder="╪¬┘ê┘ä╪»" required />
                      <input class="price-input" id="bulk-film" type="text" inputmode="numeric" placeholder="┘ü█î┘ä┘à" required />
                      <button type="submit" class="btn">╪º╪╣┘à╪º┘ä ╪¬╪║█î█î╪▒╪º╪¬ ╪»╪│╪¬┘ç ╪¼┘à╪╣█î</button>
                    </form>
                  </div>

                  <div class="table-wrapper">
                    <table>
                      <thead>
                        <tr>
                          <th style="width:42px"><input type="checkbox" id="header-select" /></th>
                          <th>┘å╪º┘à ╪│█î╪│╪¬┘à</th>
                          <th>┘ê╪╢╪╣█î╪¬ ┘é█î┘à╪¬</th>
                          <th>╪¬┘å╪╕█î┘à╪º╪¬</th>
                        </tr>
                      </thead>
                      <tbody id="systems-body"></tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section id="tab-settings" class="tab">
          <div class="card">
            <h3>╪¬┘å╪╕█î┘à╪º╪¬</h3>
            <div class="form grid">
              <label class="field full">
                <span>╪╣┘å┘ê╪º┘å ╪│╪º█î╪¬</span>
                <input id="site-title" type="text" value="┌»┘à ┘å╪¬ ╪│█î╪│╪¬┘à█î" />
              </label>
            </div>
          </div>
          <div class="card" style="margin-top:12px;">
            <h3>╪¡╪▒█î┘à ╪«╪╡┘ê╪╡█î</h3>
            <form id="privacy-form" class="form">
              <label class="field">
                <span>╪▒┘à╪▓ ┘ü╪╣┘ä█î</span>
                <input id="current-pass" type="password" autocomplete="current-password" required />
              </label>
              <label class="field">
                <span>╪▒┘à╪▓ ╪¼╪»█î╪»</span>
                <input id="new-pass" type="password" autocomplete="new-password" minlength="4" required />
              </label>
              <label class="field">
                <span>╪¬┌⌐╪▒╪º╪▒ ╪▒┘à╪▓ ╪¼╪»█î╪»</span>
                <input id="confirm-pass" type="password" autocomplete="new-password" minlength="4" required />
              </label>
              <div class="modal-actions">
                <button type="submit" class="btn primary">╪░╪«█î╪▒┘ç ╪▒┘à╪▓</button>
              </div>
              <p id="privacy-msg" class="hint"></p>
            </form>
          </div>
        </section>
      </main>
    </div>

    <!-- Add User Modal -->
    <div id="user-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="user-modal-title">
      <div class="modal-card">
        <h3 id="user-modal-title">╪º┘ü╪▓┘ê╪»┘å ┌⌐╪º╪▒╪¿╪▒</h3>
        <form id="user-form" class="form">
          <label class="field">
            <span>╪┤┘à╪º╪▒┘ç ╪¬┘ä┘ü┘å (11 ╪▒┘é┘à)</span>
            <input id="user-phone" type="text" inputmode="numeric" pattern="^\d{11}$" placeholder="09xxxxxxxxx" required />
          </label>
          <label class="field">
            <span>╪▒┘à╪▓ ╪╣╪¿┘ê╪▒</span>
            <input id="user-pass" type="password" minlength="4" required />
          </label>
          <div class="modal-actions">
            <button type="button" class="btn" id="user-cancel">╪º┘å╪╡╪▒╪º┘ü</button>
            <button type="submit" class="btn primary">╪º┘ü╪▓┘ê╪»┘å</button>
          </div>
          <p id="user-form-msg" class="hint"></p>
        </form>
      </div>
    </div>

    <!-- System Settings Modal -->
    <div id="system-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="system-modal-title">
      <div class="modal-card">
        <h3 id="system-modal-title">╪¬┘å╪╕█î┘à╪º╪¬ ╪│█î╪│╪¬┘à</h3>
        <form id="system-form" class="form">
          <div class="grid full">
            <label class="field">
              <span>┘å╪º┘à ╪│█î╪│╪¬┘à</span>
              <input id="system-name" type="text" required />
            </label>
          </div>
          <div class="grid full">
            <label class="field">
              <span>╪¬┌⌐ ╪»╪│╪¬┘ç (╪▒█î╪º┘ä/╪│╪º╪╣╪¬)</span>
              <input id="price-1p" class="price-input" type="text" inputmode="numeric" required />
            </label>
            <label class="field">
              <span>╪»┘ê ╪»╪│╪¬┘ç (╪▒█î╪º┘ä/╪│╪º╪╣╪¬)</span>
              <input id="price-2p" class="price-input" type="text" inputmode="numeric" required />
            </label>
            <label class="field">
              <span>╪│┘ç ╪»╪│╪¬┘ç (╪▒█î╪º┘ä/╪│╪º╪╣╪¬)</span>
              <input id="price-3p" class="price-input" type="text" inputmode="numeric" required />
            </label>
            <label class="field">
              <span>┌å┘ç╪º╪▒ ╪»╪│╪¬┘ç (╪▒█î╪º┘ä/╪│╪º╪╣╪¬)</span>
              <input id="price-4p" class="price-input" type="text" inputmode="numeric" required />
            </label>
          </div>
          <div class="grid full">
            <label class="field">
              <span>╪¬┘ê┘ä╪» (╪▒█î╪º┘ä)</span>
              <input id="price-birthday" class="price-input" type="text" inputmode="numeric" required />
            </label>
            <label class="field">
              <span>┘ü█î┘ä┘à (╪▒█î╪º┘ä)</span>
              <input id="price-film" class="price-input" type="text" inputmode="numeric" required />
            </label>
          </div>
          <div class="modal-actions">
            <button type="button" class="btn" id="system-cancel">╪º┘å╪╡╪▒╪º┘ü</button>
            <button type="submit" class="btn primary">╪░╪«█î╪▒┘ç</button>
          </div>
          <p id="system-form-msg" class="hint"></p>
        </form>
      </div>
    </div>

    <!-- Periods Modal -->
    <div id="periods-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="periods-modal-title">
      <div class="modal-card" style="max-width:640px;">
        <h3 id="periods-modal-title">╪¬┘å╪╕█î┘à ╪¿╪º╪▓┘çΓÇî┘ç╪º█î ╪▓┘à╪º┘å█î (█▓█┤ ╪│╪º╪╣╪¬┘ç)</h3>
        <div class="form">
          <div class="hint">╪¿█î┘å █▒ ╪¬╪º █╡ ╪¿╪º╪▓┘ç ╪¬╪╣╪▒█î┘ü ┌⌐┘å█î╪»╪¢ ┌⌐┘ä █▓█┤ ╪│╪º╪╣╪¬ ╪▒╪º ╪¿╪»┘ê┘å ┘ç┘àΓÇî┘╛┘ê╪┤╪º┘å█î ┘ê ╪¿╪»┘ê┘å ┘ü╪º╪╡┘ä┘ç ┘╛┘ê╪┤╪┤ ╪»┘ç█î╪».</div>
          <div id="periods-list" class="periods-list"></div>
          <div style="display:flex; gap:8px;">
            <button id="add-period" type="button" class="btn">+ ╪º┘ü╪▓┘ê╪»┘å ╪¿╪º╪▓┘ç</button>
          </div>
        </div>
        <div class="modal-actions">
          <button type="button" class="btn" id="periods-cancel">╪º┘å╪╡╪▒╪º┘ü</button>
          <button type="button" class="btn primary" id="periods-save">╪░╪«█î╪▒┘ç</button>
        </div>
        <p id="periods-msg" class="hint"></p>
      </div>
    </div>

    <script src="branches.js"></script>
    <script src="app.js"></script>
  </body>
  </html>
